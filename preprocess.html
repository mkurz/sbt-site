<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="sbt-site-root">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="sbt-site-root">
<link rel="shortcut icon" href="img/favicon.png">
<title>Preprocessing Â· sbt-site</title>
<link rel="stylesheet" href="assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="lib/prettify/prettify.css">
<script src="assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="assets/fonts/font-awesome.css">
<link rel="stylesheet" href="assets/fonts/material-icons.css">
<link rel="stylesheet" href="assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="index.html" title="sbt-site" class="md-header-nav__button md-logo">
<img src="img/sbt-logo.svg" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
sbt-site
</span>
<span class="md-header-nav__topic">
Preprocessing
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/sbt/sbt-site"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
sbt/sbt-site
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="index.html" title="sbt-site" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="img/sbt-logo.svg" width="24" height="24">
</a>
<a href="index.html" title="sbt-site">
sbt-site
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/sbt/sbt-site"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
sbt/sbt-site
</div>
</a>

</div>
<ul>
  <li><a href="getting-started.html" class="page">Getting Started</a></li>
  <li><a href="preprocess.html" class="active page">Preprocessing</a></li>
  <li><a href="api-documentation.html" class="page">API documentation</a></li>
  <li><a href="generators/index.html" class="page">Site Generators</a>
  <ul>
    <li><a href="generators/asciidoctor.html" class="page">Asciidoctor</a></li>
    <li><a href="generators/gitbook.html" class="page">GitBook</a></li>
    <li><a href="generators/hugo.html" class="page">Hugo</a></li>
    <li><a href="generators/jekyll.html" class="page">Jekyll</a></li>
    <li><a href="generators/laika.html" class="page">Laika</a></li>
    <li><a href="generators/nanoc.html" class="page">Nanoc</a></li>
    <li><a href="generators/pamflet.html" class="page">Pamflet</a></li>
    <li><a href="generators/paradox.html" class="page">Paradox</a></li>
    <li><a href="generators/sphinx.html" class="page">Sphinx</a></li>
  </ul></li>
  <li><a href="publishing.html" class="page">Publishing</a></li>
  <li><a href="advanced-usage.html" class="page">Advanced Usage</a></li>
  <li><a href="migration-guide.html" class="page">Migration Guide</a></li>
  <li><a href="notes/index.html" class="page">Release Notes</a>
  <ul>
    <li><a href="notes/1.4.0.html" class="page">Release 1.4.0</a></li>
    <li><a href="notes/1.3.3.html" class="page">Release 1.3.3</a></li>
    <li><a href="notes/1.3.2.html" class="page">Release 1.3.3</a></li>
    <li><a href="notes/1.3.1.html" class="page">Release 1.3.1</a></li>
    <li><a href="notes/1.3.0.html" class="page">Release 1.3.0</a></li>
    <li><a href="notes/1.2.1.html" class="page">Release 1.2.1</a></li>
    <li><a href="notes/1.2.0.html" class="page">Release 1.2.0</a></li>
    <li><a href="notes/1.1.0.html" class="page">Release 1.1.0</a></li>
    <li><a href="notes/1.0.0.html" class="page">Release 1.0.0</a></li>
    <li><a href="notes/0.8.2.html" class="page">Release 0.8.2</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="preprocess.html#preprocessing" class="header">Preprocessing</a>
  <ul>
    <li><a href="preprocess.html#substitution" class="header">Substitution</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 1.5.0
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="preprocess.html#preprocessing" class="header">Preprocessing</a>
  <ul>
    <li><a href="preprocess.html#substitution" class="header">Substitution</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#preprocessing" name="preprocessing" class="anchor"><span class="anchor-link"></span></a>Preprocessing</h1>
<p>sbt-site supports simple variable and Regular Expression substitution via the <code>PreprocessPlugin</code> if for example you need to replace a version string in a source file or a generated HTML file. More advanced preprocessing, such as interpreting code snippets with [tut], is possible via additional configuration as shown below.</p>
<h2><a href="#substitution" name="substitution" class="anchor"><span class="anchor-link"></span></a>Substitution</h2>
<p>The <code>PreprocessPlugin</code> reads files from an input directory, substitute variables and writes them to an output directory. In addition to preprocessing static content it is also possible to use the plugin either before or after invoking a <a href="generators/index.html">site generator</a>. To enable, add this to your <code>build.sbt</code> file:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/sbt/sbt-site/tree/master/core/src/sbt-test/preprocess/does-transform-variables/build.sbt#L4" target="_blank" title="Go to snippet source">source</a><code class="language-sbt">enablePlugins(PreprocessPlugin)</code></pre>
<p>By default files are read from <code>src/site-preprocess</code> but this is configurable by setting <code>sourceDirectory</code>:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/sbt/sbt-site/tree/master/core/src/sbt-test/preprocess/does-transform-variables/build.sbt#L24" target="_blank" title="Go to snippet source">source</a><code class="language-sbt">Preprocess / sourceDirectory := sourceDirectory.value / &quot;site-preprocess&quot;</code></pre>
<p>Variables are delimited by surrounding the name with <code>@</code> symbols (e.g. <code>@VERSION@</code>). Values are assigned to variables via the setting <code>preprocessVars: Map[String, String]</code>. For example:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/sbt/sbt-site/tree/master/core/src/sbt-test/preprocess/does-transform-variables/build.sbt#L12" target="_blank" title="Go to snippet source">source</a><code class="language-sbt">Preprocess / preprocessVars := Map(&quot;VERSION&quot; -&gt; version.value, &quot;DATE&quot; -&gt; new Date().toString)</code></pre><div class="callout note "><div class="callout-title">Note</div>
<p>The plugin will generate an error if a variable is found in the source file with no matching value in <code>preprocessVars</code>.</p></div>
<p>More advanced substitution patterns can be used by providing Regular Expression rules via the setting <code>preprocessRules: Seq[(Regex, Match =&gt; String)]</code>. For example Scaladoc used to (before 2.12.9 and 2.13.0) prepend &ldquo;.scala&rdquo; to source links of Java files. The following preprocessing rule will find and fix such links:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/sbt/sbt-site/tree/master/core/src/sbt-test/preprocess/transform-scaladoc/build.sbt#L16-L18" target="_blank" title="Go to snippet source">source</a><code class="language-sbt">preprocessRules in Preprocess := Seq(
  (&quot;\\.java\\.scala&quot;.r, _ =&gt; &quot;.java&quot;)
)</code></pre>
<p>The setting <code>preprocessIncludeFilter</code> is used to define the filename extensions that should be processed when <code>makeSite</code> is run.</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/sbt/sbt-site/tree/master/core/src/sbt-test/preprocess/does-transform-variables/build.sbt#L20" target="_blank" title="Go to snippet source">source</a><code class="language-sbt">preprocessIncludeFilter := &quot;*.md&quot; | &quot;*.markdown&quot;</code></pre>
<p>The default filter is:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/sbt/sbt-site/tree/master/core/src/main/scala/com/typesafe/sbt/site/preprocess/PreprocessPlugin.scala#L34" target="_blank" title="Go to snippet source">source</a><code class="language-scala">&quot;*.txt&quot; | &quot;*.html&quot; | &quot;*.md&quot; | &quot;*.rst&quot;</code></pre>
</div>
<div>
<a href="https://github.com/sbt/sbt-site/tree/master/src/main/paradox/preprocess.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
1.5.0
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="getting-started.html" title="Getting Started" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Getting Started
</span>
</div>
</a>
<a href="api-documentation.html" title="API documentation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
API documentation
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="assets/javascripts/application.583bbe55.js"></script>
<script src="assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"."}})</script>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
